<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Agile Copilot — Day 7 (Polish & Usability)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Styles -->
  <link rel="stylesheet" href="styles.css" />
  <!-- CSV parser (free CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <!-- Charts (free CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <header class="topbar">
    <h1>Agile Copilot — Safe Mode</h1>
    <div class="actions">
      <button id="btnClearAll" class="btn secondary" title="Reset the page to initial state">Clear All</button>
      <button id="btnExportMd" class="btn" title="Export report as Markdown (.md)">Export Markdown</button>
    </div>
  </header>

  <main class="container">
    <!-- Upload -->
    <section class="card">
      <h3>Upload Sprint CSV</h3>
      <div class="row">
        <input type="file" id="fileInput" accept=".csv" />
      </div>
      <div class="meta">
        <div><strong>File:</strong> <span id="fileName">—</span></div>
        <div><strong>Uploaded:</strong> <span id="uploadedAt">—</span></div>
      </div>
      <p class="hint">Tip: re-upload to compute new metrics and auto-save to History (local only).</p>
    </section>

    <!-- Tabs -->
    <section class="tabs">
      <button class="tab active" data-tab="reports">Reports</button>
      <button class="tab" data-tab="history">History</button>
    </section>

    <!-- Reports -->
    <section id="tab-reports" class="tabpanel active">
      <div class="grid">
        <div class="card">
          <h4>Executive Summary</h4>
          <p id="execSummary">(no report yet)</p>
        </div>

        <div class="card">
          <h4>Metrics</h4>
          <ul id="metricsList"></ul>
        </div>

        <div class="card">
          <h4>Observations</h4>
          <p id="observations">(no report yet)</p>
        </div>

        <div class="card">
          <h4>Recommended Next Actions</h4>
          <ol id="nextActions"></ol>
        </div>

        <div class="card">
          <h4>Velocity</h4>
          <canvas id="velocityChart"></canvas>
          <p class="hint" id="velocityHint"></p>
        </div>

        <div class="card">
          <h4>Points by Status</h4>
          <canvas id="statusChart"></canvas>
        </div>
      </div>
    </section>

    <!-- History -->
    <section id="tab-history" class="tabpanel">
      <div class="card">
        <h4>Previous Sessions (Saved Locally)</h4>
        <p class="hint">These are stored in your browser only (localStorage). Click “View” to reload.</p>
        <table class="table">
          <thead>
            <tr>
              <th>#</th>
              <th>File</th>
              <th>Uploaded</th>
              <th>Rows</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="historyTableBody"></tbody>
        </table>
      </div>
    </section>
  </main>

  <footer class="foot">
    <small>Day 7 polish: cards, filename + timestamp, history, clear all, markdown export, and charts — Safe Mode.</small>
  </footer>

  <!-- App logic -->
  <script src="app.js"></script>
</body>
</html>
